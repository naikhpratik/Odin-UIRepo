@model Odin.ViewModels.Orders.Transferee.HousingViewModel

<div class="container-fluid" id="housing">
    <div class="row" id="housingSummaryMap">
        <div class="col-md-4">
            <h1 class="sectionTitle">Housing Summary</h1>
            <ul class="row sectionList">
                <li class="col-md-6">
                    <label>@Html.DisplayNameFor(model => model.HousingBudget)</label>
                    <p>@Html.DisplayFor(model => model.HousingBudget)</p>
                </li>
                <li class="col-md-6">
                    <label>@Html.DisplayNameFor(model => model.NumberOfBedrooms)</label>
                    <p>@Html.DisplayFor(model => model.NumberOfBedrooms)</p>
                </li>
                <li class="col-md-6">
                    <label>@Html.DisplayNameFor(model => model.PetsCount)</label>
                    <p>@Html.DisplayFor(model => model.PetsCount) </p>
                </li>
                <li class="col-md-6">
                    <label>@Html.DisplayNameFor(model => model.TransportationTypeName)</label>
                    <p>@Html.DisplayFor(model => model.TransportationTypeName)</p>
                </li>
                <li class="col-md-6">
                    <label>@Html.DisplayNameFor(model => model.HousingTypeName)</label>
                    <p>@Html.DisplayFor(model => model.HousingTypeName)</p>
                </li>
                <li class="col-md-6">
                    <label>@Html.DisplayNameFor(model => model.NumberOfBathroomsName)</label>
                    <p>@Html.DisplayFor(model => model.NumberOfBathroomsName)</p>
                </li>
                <li class="col-md-6">
                    <label>@Html.DisplayNameFor(model => model.MaxCommute)</label>
                    <p>@Html.DisplayFor(model => model.MaxCommute)</p>
                </li>
                <li class="col-md-6">
                    <label>@Html.DisplayNameFor(model => model.SpouseAndKids)</label>
                    <p>@Html.DisplayFor(model => model.SpouseAndKids)</p>
                </li>
            </ul>
        </div>
        <div class="col-md-8 mapWrapper">
            <img src="~/Content/Images/map_placeholder.png" />
        </div>
    </div>

    <div class="row" id="propertiesControls">

                        <!--
                        <form class="col-sm-6" id="housingFilter">
                            <label class="housingFilter__title">Filter:</label>
                            <label>
                                @Html.RadioButton("Filter", "New", true)
                                <span>New</span>
                            </label>
                            <label>
                                @Html.RadioButton("Filter", "Like", false)
                                <span>Like</span>
                            </label>
                            <label>
                                @Html.RadioButton("Filter", "Dislike", false)
                                <span>Dislike</span>
                            </label>
                        </form>
                        -->
                        @* Change to col-sm-6 when readding the above filters *@

        <div class="col-sm-12" id="addProperty" data-toggle="modal" data-target="#addPropertyModal">
            <span>Add Property</span>
            <img src="~/Content/Images/btn_add_home.png" />
        </div>
    </div>

    <div id="propertiesContainer">
        @Html.Partial("~/Views/Orders/Partials/_HousingProperties.cshtml", Model.Properties)
    </div>

    <div id="chat" style="display: none;">
        <div id="addr">
            <span> Last Message</span><span id="lastchat"> 01:45 PM</span>
        </div>
        <div id="chatwrapper">
            <div id="chatframe">
                <ul>
                    <li>
                        <img src="~/Content/Images/icn_chat_2.png" /><span> Joyce Damino</span>
                        <div>
                            <p>Would you like to go see 1234 MeadowRd on the 11th of November?</p>
                        </div>
                    </li>
                    <li>
                        <img src="~/Content/Images/icn_chat_1.png" /><span> Victoria Sporer</span>
                        <div>
                            <p>Yes, I would like to go visit 1234 Meadow Rd.That will work well, I am bringing the kids.</p>
                        </div>
                    </li>
                    <li>
                        <img src="~/Content/Images/icn_chat_2.png" /><span> Joyce Damino</span>
                        <div>
                            <p>Sounds good, I will see you all there at 10am?</p>
                        </div>
                    </li>
                    <li>
                        <img src="~/Content/Images/icn_chat_2.png" /><span> Joyce Damino</span>
                        <div>
                            <p>Would you like to go see 1232 RoseLn on the 11th of November</p>
                        </div>
                    </li>
                    <li>
                        <img src="~/Content/Images/icn_chat_1.png" /><span> Victoria Sporer</span>
                        <div>
                            <p>Yes, I would like to go visit 1232 RoseLn.That will work well, we can do this one in the afternoon.</p>
                        </div>
                    </li>
                    <li>
                        <img src="~/Content/Images/icn_chat_2.png" /><span> Joyce Damino</span>
                        <div>
                            <p>Sounds good, I will call and make sure we can get in then.</p>
                        </div>
                    </li>
                </ul>
            </div>
            <div id="comment">
                < p > Comment </ p >
            </div>
            < button > Close </ button >
            < button > Send </ button >
        </div>
    </div>
    <div id="property" style="display: none;">
        <div class="row">
            <div class="col-md-5">
                <span>Available: </span><span>November 12th 2017</span>
            </div>
            <div class="col-md-5">
                <img id="closeproperty" src="~/Content/Images/icn_close_pg.png" />
            </div>
        </div>
        <div class="row">
            <div class="col-md-8">
                <img src="~/Content/Images/image_placeholder_large.png" />
            </div>
            <div class="col-md-4">
                <div>
                    <span>Address:</span>
                    <p>1234 Meadow Rd Renton WA 11111</p>

                    <span>Rent:</span>
                    <p>$1,200 a month</p>

                    <span>Housing Type and Sq.Ft:</span>
                    <p>900 Sq.Ft.Condo</p>

                    <span>Bedrooms and Bathrooms:</span>
                    <p>2.2</p>
                </div>
                <div>
                    <span>Pets:</span>
                    <p>Small dogs and cats (no pitbulls)</p>

                    <span>Central Air:</span>
                    <p>Yes</p>

                    <span>Parking:</span>
                    <p>1 spot</p>

                    <span>Laundry:</span>
                    <p>Shared laundry, not in units</p>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-md-8">
                <img src="~/Content/Images/Desktop_ln_image_placeholder.png" />
                < img src="~/Content/Images/Desktop_ln_image_placeholder.png" />
                <img src="~/Content/Images/Desktop_ln_image_placeholder.png" />
                < img src="~/Content/Images/Desktop_ln_image_placeholder.png" />
            </div>
            <div class="col-md-4">
                <div>
                    <div>
                        <img class="non_like_sel likebtn" src="~/Content/Images/icn_ln_non_selected_like.png" />
                        <img class="like_sel likebtn noinit" src="~/Content/Images/icn_ln_selected_like.png" />
                    </div>
                    <div class="dislike">
                        <img class="non_dislike_sel likebtn" src="~/Content/Images/icn_ln_non_selected_dislike.png" />
                        <img class="dislike_sel likebtn noinit" src="~/Content/Images/icn_ln_selected_dislike.png" />
                    </div>
                </div>
                <div>
                    <div>
                        <img src="~/Content/Images/icn_chat_bubble.png" />
                        <div class="notify-count noinit">
                            <img src="~/Content/Images/icn_alert_circle.png" />
                            <span> 00 </span>
                        </div>
                    </div>
                    <div>
                        < img src="~/Content/Images/icn_cal_B1.png"/>
                    </div>
                </div>
            </div>
        </div>
        <div class="row">
            <p>Other Notes:</p>
            <p>Neque porro quisquam est, qui dolorem ipsum quia dolor sit amet, consectetur, adipisci velit, sed quia non numquam eius modi tempora incidunt ut labore et dolore magnum aliquam quaerat voluptatem.Neque porro quisquam est, qui dolorem ipsum quia dolor sit amet, consectetur, adipisci velit, sed quia non numquam eius modi tempora incidunt ut labore et dolore magnum aliquam quaerat voluptatem. Neque porro quisquam est, qui dolorem ipsum quia dolor sit amet, consectetur,</p>
        </div>
    </div>
</div>


                @*<script>
                        var $lastFilter;

                        document.addEventListener("DOMContentLoaded", function () {
                            $lastFilter = null;

                            // filters
                            $("div#housing div.notfirst input[name='choice']").click(function () {
                                if ($lastFilter !== null)
                                   $($lastFilter.next()).removeClass("selected");

                                $lastFilter = $(this);
                                $($lastFilter.next()).addClass("selected");

                                // apply filter
                                $('div#housing tbody tr').each(function () {
                                    if ($(this).attr("sel") !== $lastFilter.attr('value'))
                                        $(this).css("display", "none");
                                    else
                                        $(this).css("display", "table-row");
                                });
                            });

                            // add property
                            $('div#housing div#add').click(function () {
                                alert("Add New Property");
                            });

                            // new/like/dislike
                            $('div.likebtns img').click(function () {
                                var likeSel;
                                $(this).css("display", "none");

                                if ($(this).hasClass('new')) {
                                    likeSel = "like";
                                    $(this).next().css("display", "inline");
                                    $(this).parent().parent().parent().attr("sel", "like");
                                }
                                else if ($(this).hasClass('like')) {
                                    likeSel = "dislike";
                                    $(this).next().css("display", "inline");
                                    $(this).parent().parent().parent().attr("sel", "dislike");
                                }
                                else {
                                    likeSel = "new";
                                    $(this).prev().prev().css("display", "inline");
                                    $(this).parent().parent().parent().attr("sel", "new");
                                }

                                // apply current filter
                                if ($lastFilter !== null && $lastFilter.attr('value') !== likeSel) {
                                    $(this).parent().parent().parent().css("display", "none");
                                }
                            });

                            // open chat window
                            $('div#housing tbody div.comments').click(function () {
                                if ($(this).find('div.notify-count').hasClass('noinit') === false)
                                    $('div#chat').css("display", "block");
                            });

                            // close chat window
                            $($('div#housing div#chat button')[0]).click(function () {
                                $('div#chat').css("display", "none");
                            });

                            // open property window
                            $('div#housing tbody img.location').click(function () {
                                $('div#property').css("display", "block");
                            });

                            // close property window
                            $('div#housing div#property img#closeproperty').click(function () {
                                $('div#property').css("display", "none");
                            });

                            // propery window like btns
                            $('div#housing div#property img.likebtn').each(function () {
                                $(this).click(function () {
                                    $(this).css("display", "none");

                                    if ($(this).hasClass('non_like_sel')) {
                                        $(this).next().css("display", "inline");
                                    } else if ($(this).hasClass('like_sel')) {
                                        $(this).prev().css("display", "inline");
                                    } else if ($(this).hasClass('non_dislike_sel')) {
                                        $(this).next().css("display", "inline");
                                    } else {
                                        $(this).prev().css("display", "inline");
                                    }
                                });
                            });
                        });
                    </script>*@

<!-- Modal -->
@* using data-backdrop="false" because bootstrap was putting the model under the backdrop and I didn't want to spend the time to fix it *@
<div class="modal" id="addPropertyModal" tabindex="-1" role="dialog" aria-labelledby="addPropertyModalLabel" data-backdrop="false">
    <div class="modal-dialog modal-lg" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                <h5 class="modal-title" id="myModalLabel">Property Information:</h5>
            </div>
                @{  var property = new Odin.ViewModels.Orders.Transferee.HousingPropertyViewModel();
                    property.OrderId = Model.Id;
                }
                @Html.Partial("~/Views/Shared/EditorTemplates/CreateHousingProperty.cshtml", property)            
        </div>
    </div>
</div>

<!-- Modal -->
<div class="modal fade" id="propertyDetailsModal" tabindex="-1" role="dialog" aria-labelledby="propertyDetailsModal" data-backdrop="false">
    <div class="modal-dialog modal-lg" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
            </div>
            <div id="propertyModalBody" class="modal-body">
                <!-- Body stuff goes here -->
            </div>
        </div>
    </div>
</div>

@Styles.Render("~/Styling/housing")
<script>
    $(document).ready(function () {
        TransfereeHousingController.init();
    });
</script>